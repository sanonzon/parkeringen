{% include "kombo_parking/header.html" %}

<div id="calendar"></div>

<script>
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');

    $('#calendar').fullCalendar({
        header: {
            left: 'month,agendaWeek,agendaDay',
            center: 'title',
            right:  'today prev,next,prevYear,nextYear'
        },
        events: {{ list|safe }},
        dayClick: function(date, jsEvent, view) {
             $.ajax({
                type: "POST",
                url: "/calendar/",
                data: {
                    'date': date.format(),
                    'csrfmiddlewaretoken': csrftoken,
                },
                success: function(newData) {
                    $('#modalArea').html(newData);
                    $('#calendarmodal').modal('show');
                }
           })
        },
        //~ eventClick: function(calEvent) {
            //~ $.ajax({
                //~ type: "POST",
                //~ url: "/calendar/",
                //~ data: {
                    //~ 'given_id': calEvent.id,
                    //~ 'csrfmiddlewaretoken': csrftoken,
                //~ },
                //~ success: function(newData) {
                    //~ $('#modalArea').html(newData);
                    //~ $('#detailModal' + calEvent.id).modal('show');
                //~ }
           //~ })
        //~ }
        
    });
</script>

<div id="modalArea">
    
</div>
{% include "kombo_parking/footer.html" %}
